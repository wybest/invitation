(function(){$.extend(jQuery.fn,{config:{noSameClass:"",emptyClass:"",customVaild:function(){return!0}},setConfig:function(a,b){this.config[a]=b},validateItem:function(a,b,c,e,f,i,d){function g(a,d){if(a)return h.parent().removeClass(b).removeClass(c).removeClass(e).removeClass(f),h.parent().addClass(d),!0;h.parent().removeClass(d)}var h=this;if(a&&0<$("."+b+", ."+c+", ."+e,d).length)return!1;d=this.attr("isRequired");a=this.val();"password"!=this.attr("type")&&(a=$.trim(a));var j=this.attr("repeat");
if(j&&(a=$(j).val(),"password"!=this.attr("type")&&(a=$.trim(a)),g(this.val()!==a,e))||g(d&&0==a.length,b))return!1;d=this.attr("rule");if(null!=d){for(var j=!0,k=0,d=d.split("{$}");k<d.length;)if(!RegExp(d[k++]).test(a)){j=!1;g(!0,c);break}j&&g(!1,c)}a=this.parent();!a.hasClass(b)&&!a.hasClass(c)&&!a.hasClass(e)?(a.addClass(f),i||$(this).trigger("afterValidate")):(a.removeClass(f),i||$(this).trigger("afterValidateFailed"))},submit:function(){var a=this;setTimeout(function(){config.customVaild()&&
a.dom.submit()},20)},validate:function(a,b,c,e,f){var i=this,b=b||"empty",c=c||"error",e=e||"repeat",f=f||"succ";"FORM"==this[0].tagName.toUpperCase()&&($(".item",this).bind("blur",function(){$(this).validateItem(!1,b,c,e,f)}).bind("focus",function(){$(this).parent().removeClass([b,c,e,f].join(" "))}),this.bind("submit",function(){var a=$(this).find("input[type=submit]");a.attr("disabled","true");$(this).config.customVaild();var g=$(".item",this);$(".item",this).blur();for(var h=0;h<g.length;h++)$(g[h]).validateItem(!1,
b,c,e,f);g=$(".item",this).parent();if(i.config.noSameClass&&g.hasClass(i.config.noSameClass)||0<$("."+b+", ."+c+", ."+e,this).length)return a.attr("disabled",""),!1}))}})})();
